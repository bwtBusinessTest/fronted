webpackJsonp([16],{"2QJc":function(e,t,i){"use strict";(function(e){var a=i("Dd8w"),o=i.n(a),n=i("NYxO"),r={data:function(){return{scrollHeight:0,queryContainerShrink:!1}},computed:o()({},i.i(n.c)({isCollapse:function(e){return e.app.sidebar.opened}})),methods:{openNewAddModal:function(){var t=this;setTimeout(function(){t.isCollapse?document.querySelector(".v-modal")&&(document.querySelector(".v-modal").style.left="200px",e(".el-dialog__wrapper").css("left","200px")):(t.$nextTick(function(){document.querySelector(".v-modal").style.left="36px"}),document.querySelector(".v-modal")&&(document.querySelector(".v-modal").style.left="36px",e(".el-dialog__wrapper").css("left","36px"))),document.querySelector(".v-modal")&&(t.scrollHeight=e(document).scrollTop(),t.scrollHeight>=0&&t.scrollHeight<50?(document.querySelector(".v-modal").style.top=50-t.scrollHeight+"px",e(".el-dialog__wrapper").css("top",50-t.scrollHeight+"px")):(document.querySelector(".v-modal").style.top="0px",e(".el-dialog__wrapper").css("top","0px")))},100)},shrinkQueryArea:function(e){this.queryContainerShrink?(this.$refs.queryContainer.style.height=e+"px",this.queryContainerShrink=!1):(this.$refs.queryContainer.style.height="60px",this.queryContainerShrink=!0)}},watch:{isCollapse:function(t){document.querySelector(".v-modal")&&(t?(document.querySelector(".v-modal").style.left="200px",e(".el-dialog__wrapper").css("left","200px")):(document.querySelector(".v-modal").style.left="36px",e(".el-dialog__wrapper").css("left","36px")))}}};t.a=r}).call(t,i("7t+N"))},"3iRu":function(e,t,i){"use strict";(function(e){var a=i("Dd8w"),o=i.n(a),n=i("yBci"),r=i("9q5R"),l=i("2QJc"),s=i("NYxO");t.a={data:function(){var e=function(e,t,i){return/^[1-9]\d*$/.test(t)?t-661801<0?i(new Error("分销商代码必须大于661801,并且依次排序")):i():i(new Error("只能输入数字"))};return{pageId:"30301",dialogAddVisible:!1,dialogEditVisible:!1,centerDialogVisible:!1,total:0,tableData:[],noTableData:"",loading:!0,labelPosition:"right",multipleSelection:[],newAddForm:{name:"",shortName:"",status:""},editForm:{code:"",name:"",shortName:"",appId:"",appSecret:"",status:""},searchData:{pageNo:1,pageSize:20},newRetailRules:{code:[{required:!0,message:"请输入用户分销商代码",trigger:"blur"},{validator:e,trigger:"blur"},{max:6,message:"最长6位数字",trigger:"blur"}],name:[{required:!0,message:"请输入分销商名称",trigger:"blur"},{max:20,message:"最长20个字符",trigger:"blur"}],shortName:[{required:!0,message:"请输入分销商简称",trigger:"blur"},{message:"简称最多10字符",max:10,trigger:"blur"}],appId:[{required:!0,message:"请输入appId",trigger:"blur"},{trigger:"blur",message:"最少1个字符最多20个字符",min:1,max:20}],status:[{required:!0,message:"请选择分销商状态",trigger:"change"}]},editRetailRules:{code:[{required:!0,message:"请输入用户分销商代码",trigger:"blur"},{validator:e,trigger:"blur"},{max:20,message:"最长20个字符",trigger:"blur"}],name:[{required:!0,message:"请输入分销商名称",trigger:"blur"},{max:20,message:"最长20个字符",trigger:"blur"}],shortName:[{required:!0,message:"请输入分销商简称",trigger:"blur"},{message:"简称最多11字符",max:11,trigger:"blur"}],status:[{required:!0,message:"请选择分销商状态",trigger:"change"}]},dialogVisibles:["dialogAddVisible","dialogEditVisible"]}},created:function(){this.getRetailList(!0)},computed:o()({},i.i(s.c)({openModals:function(e){return e.app.openModals}})),methods:o()({getRetailList:function(e){var t=this;this.searchData.pageNo=1;var a=this.searchData;i.i(n.a)({params:a}).then(function(i){if("0000"===i.errcode&&(t.total=i.result.totalCount,t.tableData=i.result.rows,t.changeUse(),t.loading=!1,e)){var a=t.openModals.find(function(e){return e.pageId===t.pageId});a&&"dialogAddVisible"===a.openModal?(t.newAddForm=a.data,t[a.openModal]=!0):a&&t.$nextTick(function(){a.data.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(t.tableData.find(function(t){return t.id===e.id}))}),"dialogEditVisible"===a.openModal&&t.retailEdit()})}})},changeUse:function(){for(var e=0;e<this.tableData.length;e++)"1"===this.tableData[e].status?this.tableData[e].status="启用":this.tableData[e].status="停用"},currentChange:function(e){var t=this;this.searchData.pageNo=e;var a=this.searchData;i.i(n.a)({params:a}).then(function(e){"0000"===e.errcode&&(t.tableData=e.result.rows,t.changeUse())})},sizeChange:function(e){var t=this;this.searchData.pageSize=e;var a=this.searchData;i.i(n.a)({params:a}).then(function(e){"0000"===e.errcode&&(t.tableData=e.result.rows,t.changeUse())})},handleSelectionChange:function(e){if(this.multipleSelection=e,this.editForm.appSecret="",e&&e.length>0)for(var t in this.editForm)"status"==t?"启用"===this.multipleSelection[0][t]?this.editForm[t]="1":this.editForm[t]="0":this.editForm[t]=this.multipleSelection[0][t]},submitAddForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t.newAddForm;i.i(n.b)({params:a}).then(function(e){"0000"===e.errcode&&(t.$notify.success({title:"消息",message:"添加成功",duration:600}),t.dialogAddVisible=!1,t.getRetailList())})})},openConfirm:function(){var e=this;if(this.multipleSelection&&1===this.multipleSelection.length){this.$confirm("请确认重新生成秘钥，修改后原秘钥将失效！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.getKeyGenerator()}).catch(function(){});var t=this;setTimeout(function(){t.openComfirmCallback()},100)}else this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条数据生成密钥":"只能选择一条数据生成密钥",duration:600})},openComfirmCallback:function(){this.isCollapse||this.$nextTick(function(){document.querySelector(".v-modal").style.left="36px"}),document.querySelector(".v-modal")&&(this.scrollHeight=e(document).scrollTop(),this.scrollHeight>=0&&this.scrollHeight<50?document.querySelector(".v-modal").style.top=50-this.scrollHeight+"px":document.querySelector(".v-modal").style.top="0px")},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.dialogEditVisible=!1,t.editSubmit()})},editSubmit:function(){var e=this;delete this.editForm.appSecret;var t=this.editForm;i.i(n.c)({params:t}).then(function(t){"0000"===t.errcode&&(e.$notify.success({title:"消息",message:"编辑成功",duration:600}),e.getRetailList())})},resetForm:function(e){this.$refs[e].resetFields(),this.dialogAddVisible=!1,this.dialogEditVisible=!1},retailAdd:function(){this.dialogAddVisible=!0},retailEdit:function(){this.multipleSelection&&1===this.multipleSelection.length?this.dialogEditVisible=!0:this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条数据修改":"只能选择一条数据修改",duration:600})},getKeyGenerator:function(){var e=this,t={code:this.multipleSelection[0].code};i.i(n.d)({params:t}).then(function(t){"0000"===t.errcode&&e.$notify.success({title:"消息",message:"密钥生成成功",duration:600})})}},i.i(s.d)({addOpenModals:"ADD_OPEN_MODALS",removeOpenModals:"REMOVE_OPEN_MODALS"})),mixins:[r.a,l.a],beforeRouteLeave:function(e,t,i){var a,o=this,n=this.dialogVisibles.find(function(e){return o[e]});n?(a=n===this.dialogVisibles[0]?this.newAddForm:this.multipleSelection,this.removeOpenModals({pageId:this.pageId}),this.addOpenModals({pageId:this.pageId,openModal:n,data:a})):this.removeOpenModals({pageId:this.pageId}),i()}}}).call(t,i("7t+N"))},"6jg9":function(e,t,i){var a=i("xouu");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("6fd5800c",a,!0)},"9q5R":function(e,t,i){"use strict";(function(e){var a=i("Dd8w"),o=i.n(a),n=i("NYxO"),r={computed:o()({},i.i(n.b)(["buttonAuth"]),{buttonVisible:function(){var e=this,t={};return this.buttonAuth.forEach(function(i){i.menuParentCode===e.pageId&&(t[i.menuCode]=!0)}),t}}),mounted:function(){e(".el-dialog").draggable()}};t.a=r}).call(t,i("7t+N"))},ZArq:function(e,t,i){"use strict";function a(e){i("6jg9")}Object.defineProperty(t,"__esModule",{value:!0});var o=i("3iRu"),n=i("nHEL"),r=i("VU/8"),l=a,s=r(o.a,n.a,l,null,null);t.default=s.exports},nHEL:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-manage"},[i("div",{staticClass:"query-container"},[i("el-row",{staticStyle:{width:"1072px"},attrs:{type:"flex",justify:"start"}},[i("el-col",{attrs:{span:3}},[e.buttonVisible[3030101]?i("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:e.retailAdd}},[e._v("新增")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:3}},[e.buttonVisible[3030104]?i("el-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:e.retailEdit}},[e._v("编辑")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:3}},[e.buttonVisible[3030106]?i("el-button",{attrs:{size:"small",type:"primary",icon:"upload2"},on:{click:e.openConfirm}},[e._v("生成密钥")]):e._e()],1)],1)],1),e._v(" "),i("div",{staticClass:"manage-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.tableData,border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","empty-text":e.noTableData,height:"470"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{label:"分销商代码",prop:"code"}}),e._v(" "),i("el-table-column",{attrs:{label:"分销商名称",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"简称",prop:"shortName"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"status"}})],1),e._v(" "),i("div",{staticClass:"page-container"},[i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-size":e.searchData.pageSize,"page-sizes":[10,20,30]},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"分销商新增",visible:e.dialogAddVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogAddVisible=t},open:e.openNewAddModal}},[i("el-form",{ref:"newAddForm",staticClass:"demo-ruleForm",staticStyle:{margin:"auto"},attrs:{inline:!1,model:e.newAddForm,"label-width":"150px","label-position":e.labelPosition,rules:e.newRetailRules}},[i("el-form-item",{attrs:{label:"分销商名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"70%"},model:{value:e.newAddForm.name,callback:function(t){e.newAddForm.name=t},expression:"newAddForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简称:",prop:"shortName"}},[i("el-input",{staticStyle:{width:"70%"},model:{value:e.newAddForm.shortName,callback:function(t){e.newAddForm.shortName=t},expression:"newAddForm.shortName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态:",prop:"status"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:""},model:{value:e.newAddForm.status,callback:function(t){e.newAddForm.status=t},expression:"newAddForm.status"}},[i("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.resetForm("newAddForm")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitAddForm("newAddForm")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"分销商编辑",visible:e.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditVisible=t},open:e.openNewAddModal}},[i("el-form",{ref:"editForm",staticClass:"demo-ruleForm",staticStyle:{margin:"auto"},attrs:{model:e.editForm,inline:!1,"label-width":"170px",rules:e.editRetailRules,"label-position":e.labelPosition}},[i("el-form-item",{attrs:{label:"分销商代码:",prop:"code"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.editForm.code,callback:function(t){e.editForm.code=t},expression:"editForm.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分销商名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"70%"},model:{value:e.editForm.name,callback:function(t){e.editForm.name=t},expression:"editForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简称:",prop:"shortName"}},[i("el-input",{staticStyle:{width:"70%"},model:{value:e.editForm.shortName,callback:function(t){e.editForm.shortName=t},expression:"editForm.shortName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"appid:",prop:"appId"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",disabled:!0},model:{value:e.editForm.appId,callback:function(t){e.editForm.appId=t},expression:"editForm.appId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"公钥:",prop:"appSecret"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",disabled:!0},model:{value:e.editForm.appSecret,callback:function(t){e.editForm.appSecret=t},expression:"editForm.appSecret"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态:",prop:"status"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:""},model:{value:e.editForm.status,callback:function(t){e.editForm.status=t},expression:"editForm.status"}},[i("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.resetForm("editForm")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editForm")}}},[e._v("确 定")])],1)],1)],1)},o=[],n={render:a,staticRenderFns:o};t.a=n},xouu:function(e,t,i){t=e.exports=i("FZ+f")(!0),t.push([e.i,".query-container{padding:10px;box-shadow:0 0 4px #ccc;position:relative;overflow:hidden;transition:height .5s}.query-container .query-btn{position:absolute;right:40px;bottom:18px}.query-container .draggable{position:absolute;right:0;bottom:18px;width:30px;height:30px;padding-left:5px;line-height:30px;text-align:center;border:1px solid #ccc;opacity:.5;display:none;border-radius:50%}.query-container:hover .draggable{display:block}.manage-container{margin-top:20px;padding:10px;box-shadow:0 0 4px #ccc}.manage-container .el-dialog_wrapper{left:200px;top:50px}.el-button{width:88px}.el-table{margin-top:20px}.page-container{text-align:right;padding-top:10px}.page-container .el-pagination{padding-right:0}.reset-dialog-width .el-dialog{width:30%}.reset-dialog-width .el-dialog p{text-align:center}.el-dialog__body{margin:20px 0 5px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.v-modal{transition:all .1s;left:200px;top:50px}.svg-icon{margin-right:5px}.user-manage{margin:30px auto 0;width:1120px}.el-input{margin:0 auto}.el-dialog__wrapper{top:50px;left:200px}.el-dialog{width:580px}.el-loading-mask{z-index:90}.el-textarea__inner{resize:none}","",{version:3,sources:["/Users/liwenhua/Documents/bwton/SourceCode/01.trunk/back-manage/src/views/retailManage/index.vue"],names:[],mappings:"AACA,iBACE,aAAc,AACd,wBAAyB,AACzB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAuB,CACxB,AACD,4BACI,kBAAmB,AACnB,WAAY,AACZ,WAAa,CAChB,AACD,4BACI,kBAAmB,AACnB,QAAS,AACT,YAAa,AACb,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,kBAAmB,AACnB,sBAAuB,AACvB,WAAa,AACb,aAAc,AACd,iBAAmB,CACtB,AACD,kCACI,aAAe,CAClB,AACD,kBACE,gBAAiB,AACjB,aAAc,AACd,uBAAyB,CAC1B,AACD,qCACI,WAAY,AACZ,QAAU,CACb,AACD,WACE,UAAY,CACb,AACD,UACE,eAAiB,CAClB,AACD,gBACE,iBAAkB,AAClB,gBAAkB,CACnB,AACD,+BACI,eAAiB,CACpB,AACD,+BACE,SAAW,CACZ,AACD,iCACI,iBAAmB,CACtB,AACD,iBACE,kBAAqB,AACrB,0BAA2B,AAC3B,4BAA8B,CAC/B,AACD,SACE,mBAAoB,AACpB,WAAY,AACZ,QAAU,CACX,AACD,UACE,gBAAkB,CACnB,AACD,aACE,mBAAoB,AACpB,YAAc,CACf,AACD,UACE,aAAe,CAChB,AACD,oBACE,SAAU,AACV,UAAY,CACb,AACD,WACE,WAAa,CACd,AACD,iBACE,UAAY,CACb,AACD,oBACE,WAAa,CACd",file:"index.vue",sourcesContent:["\n.query-container {\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n  position: relative;\n  overflow: hidden;\n  transition: height .5s;\n}\n.query-container .query-btn {\n    position: absolute;\n    right: 40px;\n    bottom: 18px;\n}\n.query-container .draggable {\n    position: absolute;\n    right: 0;\n    bottom: 18px;\n    width: 30px;\n    height: 30px;\n    padding-left: 5px;\n    line-height: 30px;\n    text-align: center;\n    border: 1px solid #ccc;\n    opacity: 0.5;\n    display: none;\n    border-radius: 50%;\n}\n.query-container:hover .draggable {\n    display: block;\n}\n.manage-container {\n  margin-top: 20px;\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n}\n.manage-container .el-dialog_wrapper {\n    left: 200px;\n    top: 50px;\n}\n.el-button {\n  width: 88px;\n}\n.el-table {\n  margin-top: 20px;\n}\n.page-container {\n  text-align: right;\n  padding-top: 10px;\n}\n.page-container .el-pagination {\n    padding-right: 0;\n}\n.reset-dialog-width .el-dialog {\n  width: 30%;\n}\n.reset-dialog-width .el-dialog p {\n    text-align: center;\n}\n.el-dialog__body {\n  margin: 20px 0 5px 0;\n  border-top: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n}\n.v-modal {\n  transition: all .1s;\n  left: 200px;\n  top: 50px;\n}\n.svg-icon {\n  margin-right: 5px;\n}\n.user-manage {\n  margin: 30px auto 0;\n  width: 1120px;\n}\n.el-input {\n  margin: 0 auto;\n}\n.el-dialog__wrapper {\n  top: 50px;\n  left: 200px;\n}\n.el-dialog {\n  width: 580px;\n}\n.el-loading-mask {\n  z-index: 90;\n}\n.el-textarea__inner {\n  resize: none;\n}\n"],sourceRoot:""}])},yBci:function(e,t,i){"use strict";function a(e){var t=e.params;return i.i(s.a)({url:"/distributor/queryDistributorList",method:"post",data:t})}function o(e){var t=e.params;return i.i(s.a)({url:"/distributor/add",method:"post",data:t})}function n(e){var t=e.params;return i.i(s.a)({url:"/distributor/modify",method:"post",data:t})}function r(e){var t=e.params;return i.i(s.a)({url:"/distributor/queryAllDistributors",method:"post",data:t})}function l(e){var t=e.params;return i.i(s.a)({url:"/distributor/setAppSecret",method:"post",data:t})}t.a=a,t.b=o,t.c=n,t.e=r,t.d=l;var s=i("Vo7i")}});
//# sourceMappingURL=16.48963b7b9daaf1ea359f.js.map
webpackJsonp([19],{"0xDb":function(e,t,r){"use strict";function i(e){var t=new Date(e),r=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();i=i<10?"0"+i:i;var a=a<10?"0"+a:a;return r+"-"+i+"-"+a}function a(e){var t=new Date(e),r=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();i=i<10?"0"+i:i;var a=a<10?"0"+a:a;return r+"-"+i+"-"+a+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}t.b=i,t.a=a;var o=r("pFYg");r.n(o)},"4yUY":function(e,t,r){var i=r("BWpK");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r("rjj0")("cfb7765c",i,!0)},"9q5R":function(e,t,r){"use strict";(function(e){var i=r("Dd8w"),a=r.n(i),o=r("NYxO"),n={computed:a()({},r.i(o.b)(["buttonAuth"]),{buttonVisible:function(){var e=this,t={};return this.buttonAuth.forEach(function(r){r.menuParentCode===e.pageId&&(t[r.menuCode]=!0)}),t}}),mounted:function(){e(".el-dialog").draggable()}};t.a=n}).call(t,r("7t+N"))},AYY7:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-order"},[r("div",{ref:"queryContainer",staticClass:"query-container",staticStyle:{height:"166px"}},[r("el-form",{ref:"groupOrderFrom",attrs:{inline:!0,model:e.form,"label-width":"100px"}},[r("el-row",[r("el-form-item",{attrs:{label:"分销商:"}},[r("el-select",{attrs:{size:"small",filterable:"",clearable:""},model:{value:e.form.retail,callback:function(t){e.form.retail=t},expression:"form.retail"}},e._l(e.retails,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"订单日期:"}},[r("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd",placeholder:"开始日期"},model:{value:e.form.startDate,callback:function(t){e.form.startDate=t},expression:"form.startDate"}}),e._v(" 至 "),r("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd",placeholder:"结束日期"},model:{value:e.form.endDate,callback:function(t){e.form.endDate=t},expression:"form.endDate"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"团购单号:"}},[r("el-input",{staticStyle:{width:"194px"},attrs:{size:"small"},model:{value:e.form.orderNum,callback:function(t){e.form.orderNum=t},expression:"form.orderNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"状态:"}},[r("el-select",{attrs:{size:"small",filterable:"",clearable:""},model:{value:e.form.status,callback:function(t){e.form.status=t},expression:"form.status"}},e._l(e.retailStatus,function(e){return r("el-option",{key:e.value,attrs:{label:e.caption,value:e.value}})}))],1)],1)],1),e._v(" "),r("div",{staticClass:"query-btn"},[e.buttonVisible[3020101]?r("el-button",{attrs:{size:"small",type:"primary",icon:"delete"},on:{click:e.clear}},[e._v("清空")]):e._e(),e._v(" "),e.buttonVisible[3020102]?r("el-button",{attrs:{size:"small",type:"primary",icon:"search"},on:{click:e.query}},[e._v("查询")]):e._e()],1),e._v(" "),r("div",{staticClass:"draggable",on:{click:e.shrinkQueryArea}},[r("icon-svg",{attrs:{"icon-class":"hamburger"}})],1)],1),e._v(" "),r("div",{staticClass:"manage-container"},[r("el-row",{attrs:{type:"flex",justify:"start"}},[e.buttonVisible[3020103]?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:e.newAdd}},[e._v("新增")])],1):e._e(),e._v(" "),e.buttonVisible[3020109]?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.download}},[r("icon-svg",{attrs:{"icon-class":"down"}}),e._v("下载")],1)],1):e._e(),e._v(" "),e.buttonVisible[3020110]?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"check"},on:{click:e.checkDetail}},[e._v("查看明细")])],1):e._e(),e._v(" "),e.buttonVisible[3020116]&&e.orderCheckBtnShow?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:e.orderVerify}},[e._v("订单审核")])],1):e._e(),e._v(" "),e.buttonVisible[3020117]&&e.confirChargeBtnShow?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"setting"},on:{click:e.confirmCharge}},[e._v("确认充值")])],1):e._e(),e._v(" "),e.buttonVisible[3020118]&&e.orderCancelBtnShow?r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.orderCancel}},[r("icon-svg",{attrs:{"icon-class":"cancel"}}),e._v("订单撤销")],1)],1):e._e()],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.tableData,border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","empty-text":e.noTableData,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange,"select-all":e.handleSelectAll}},[r("el-table-column",{attrs:{type:"selection"}}),e._v(" "),r("el-table-column",{attrs:{label:"分销商",prop:"distributorName",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"团购订单ID",prop:"id",width:"110",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"订单名称",prop:"groupOrderName",width:"160","show-overflow-tooltip":!0}}),e._v(" "),r("el-table-column",{attrs:{label:"应/实发量(笔)",prop:"count",width:"130",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"应/实发额(元)",prop:"money",width:"130",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请时间",prop:"createTime",width:"170"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"createUserName",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态",prop:"statusDesc",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态更新",prop:"updateTime",width:"170"}}),e._v(" "),r("el-table-column",{attrs:{label:"处理信息",prop:"processReason",width:"100"}})],1),e._v(" "),r("div",{staticClass:"page-container"},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.totalRows,"page-size":e.pageSize,"page-sizes":[10,20,30]},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增团购订单",visible:e.dialogNewAddVisible,"close-on-click-modal":!1},on:{close:e.clearNewAdd,open:e.openNewAddModal,"update:visible":function(t){e.dialogNewAddVisible=t}}},[r("el-form",{ref:"newAddGroupOrder",attrs:{model:e.groupOrder,"label-width":"78px"}},[r("el-form-item",{attrs:{label:"分销商:",prop:"retail"}},[r("el-select",{attrs:{size:"small",filterable:"",clearable:""},model:{value:e.groupOrder.retail,callback:function(t){e.groupOrder.retail=t},expression:"groupOrder.retail"}},e._l(e.retails,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"充值文件:"}},[r("el-upload",{ref:"uploadBtn",staticClass:"upload-demo",attrs:{type:"file",headers:e.uploadHeaders,action:e.uploadUrl,data:e.uploadData,name:"detailFile","show-file-list":!1,"on-change":e.handleChange,"file-list":e.fileList3,"on-progress":e.handleProcess,"on-success":e.handleSuccess,"on-error":e.handleError}},[r("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading}},[e._v("点击上传")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"模版下载:"}},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downloadTemplate}},[e._v("点击下载")])],1)],1),e._v(" "),r("ul",[e.fileList3.length>0&&e.uploadSuccess?r("li",{staticClass:"upload-process"},[e._v("\n                "+e._s(e.fileList3[0].name)+"\n                "),r("el-progress",{attrs:{percentage:e.uploadProcessValue}}),e._v(" "),r("span",{on:{click:e.clearFileList}},[e._v("x")])],1):e._e()]),e._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogNewAddVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogNewAddVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"large-dialog",attrs:{title:e.IRTitle,visible:e.dialogAddPreviewVisible,"close-on-click-modal":!1},on:{open:e.openNewAddModal,"update:visible":function(t){e.dialogAddPreviewVisible=t}}},[r("div",{staticClass:"preview-container"},[r("el-form",{attrs:{inline:!0,model:e.importResultData,"label-width":"100px"}},[r("el-row",[r("el-form-item",{staticStyle:{"margin-bottom":"0",width:"200px"},attrs:{label:"分销商:"}},[r("span",[e._v(e._s(e.importResultData.distributorName))])]),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"订单名称:"}},[r("span",[e._v(e._s(e.importResultData.orderName))])])],1),e._v(" "),r("el-row",[r("el-form-item",{staticStyle:{"margin-bottom":"0",width:"200px"},attrs:{label:"导入成功:"}},[r("span",[e._v(e._s(e.importResultData.successCount))])]),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"导入失败:"}},[r("span",[e._v(e._s(e.importResultData.failCount))])])],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"合计金额:"}},[r("span",[e._v(e._s(e.importResultData.totalBalance))])])],1)],1),e._v(" "),r("div",{staticClass:"table-container"},[e.IRBtnShow?r("el-row",[r("el-button",{attrs:{size:"small",type:"primary",icon:"setting"},on:{click:e.IRApplication}},[e._v("确认申请")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary",icon:"setting"},on:{click:e.againImport}},[e._v("重新导入")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"}},[r("a",{attrs:{href:e.IRDownload(),download:""}},[r("icon-svg",{attrs:{"icon-class":"down"}}),e._v("下载结果")],1)])],1):e._e(),e._v(" "),r("el-table",{ref:"multipleTable2",attrs:{data:e.IRtableData,border:"",height:"300"}},[r("el-table-column",{attrs:{label:"序号",prop:"sno",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户手机号",prop:"userTelphone",width:"130"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户ID",prop:"userId",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"卡券ID",prop:"cardId",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"卡券名称",prop:"cardName",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"grantAmount",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"金额(元)",prop:"grantBalance",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"导入状态",prop:"statusDesc",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"导入提示",prop:"failReason",width:"108"}})],1),e._v(" "),r("div",{staticClass:"page-container"},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.IRTotalrows,"page-size":e.IRPageSize,"page-sizes":[10,20,30]},on:{"current-change":e.IRhandleCurrentChange,"size-change":e.IRhandleSizeChange}})],1)],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"订单审核",visible:e.dialogOrderVerifyVisible,"close-on-click-modal":!1},on:{open:e.openNewAddModal,"update:visible":function(t){e.dialogOrderVerifyVisible=t}}},[r("el-form",{ref:"newAddGroupOrder",staticStyle:{width:"580px",margin:"auto"},attrs:{inline:!0,model:e.verifyInfo,"label-width":"78px"}},[r("el-form-item",{attrs:{label:"订单号:"}},[r("span",{staticStyle:{width:"400px",display:"inline-block"}},[e._v(e._s(e.verifyInfo.groupOrderNo))])]),e._v(" "),r("el-form-item",{attrs:{label:"分销商:"}},[r("span",{staticStyle:{width:"260px",display:"inline-block"}},[e._v(e._s(e.verifyInfo.distributorName))])]),e._v(" "),r("el-form-item",{attrs:{label:"订单名称:"}},[r("span",{staticStyle:{width:"134px",display:"inline-block"}},[e._v(e._s(e.verifyInfo.groupOrderName))])]),e._v(" "),r("el-form-item",{attrs:{label:"充值笔数:"}},[r("span",{staticStyle:{width:"260px",display:"inline-block"}},[e._v(e._s(e.verifyInfo.totalChargeCount)+"笔")])]),e._v(" "),r("el-form-item",{attrs:{label:"合计金额:"}},[r("span",[e._v(e._s(e.verifyInfo.totalChargeBalance)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"审核备注:"}},[r("el-input",{staticStyle:{width:"480px"},attrs:{type:"textarea",rows:4},model:{value:e.verifyInfo.remark,callback:function(t){e.verifyInfo.remark=t},expression:"verifyInfo.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.orderCheck(!0)}}},[e._v("同意")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.orderCheck(!1)}}},[e._v("不同意")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogOrderVerifyVisible=!1}}},[e._v("取 消")])],1)],1)],1)},a=[],o={render:i,staticRenderFns:a};t.a=o},BWpK:function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,".query-container{padding:10px;box-shadow:0 0 4px #ccc;position:relative;overflow:hidden;transition:height .5s}.query-container .query-btn{position:absolute;right:40px;bottom:18px}.query-container .draggable{position:absolute;right:0;bottom:18px;width:30px;height:30px;padding-left:5px;line-height:30px;text-align:center;border:1px solid #ccc;opacity:.5;display:none;border-radius:50%}.query-container:hover .draggable{display:block}.manage-container{margin-top:20px;padding:10px;box-shadow:0 0 4px #ccc}.manage-container .el-dialog_wrapper{left:200px;top:50px}.el-button{width:88px}.el-table{margin-top:20px}.page-container{text-align:right;padding-top:10px}.page-container .el-pagination{padding-right:0}.reset-dialog-width .el-dialog{width:30%}.reset-dialog-width .el-dialog p{text-align:center}.el-dialog__body{margin:20px 0 5px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.v-modal{transition:all .1s;left:200px;top:50px}.svg-icon{margin-right:5px}.group-order{margin:30px auto 0;width:1120px}.group-order .manage-container .el-col{margin-right:30px}.group-order .large-dialog .el-dialog{width:900px}.group-order li.upload-process{list-style:none;display:-webkit-box;display:-ms-flexbox;display:flex}.group-order li.upload-process>div{width:300px}.group-order li.upload-process>span{color:red;display:none}.group-order li.upload-process:hover>span{display:block}.group-order .el-dialog__wrapper{top:50px;left:200px}","",{version:3,sources:["/Users/liwenhua/Documents/bwton/SourceCode/01.trunk/back-manage/src/views/cardGroupManage/groupOrder.vue"],names:[],mappings:"AACA,iBACE,aAAc,AACd,wBAAyB,AACzB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAuB,CACxB,AACD,4BACI,kBAAmB,AACnB,WAAY,AACZ,WAAa,CAChB,AACD,4BACI,kBAAmB,AACnB,QAAS,AACT,YAAa,AACb,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,kBAAmB,AACnB,sBAAuB,AACvB,WAAa,AACb,aAAc,AACd,iBAAmB,CACtB,AACD,kCACI,aAAe,CAClB,AACD,kBACE,gBAAiB,AACjB,aAAc,AACd,uBAAyB,CAC1B,AACD,qCACI,WAAY,AACZ,QAAU,CACb,AACD,WACE,UAAY,CACb,AACD,UACE,eAAiB,CAClB,AACD,gBACE,iBAAkB,AAClB,gBAAkB,CACnB,AACD,+BACI,eAAiB,CACpB,AACD,+BACE,SAAW,CACZ,AACD,iCACI,iBAAmB,CACtB,AACD,iBACE,kBAAqB,AACrB,0BAA2B,AAC3B,4BAA8B,CAC/B,AACD,SACE,mBAAoB,AACpB,WAAY,AACZ,QAAU,CACX,AACD,UACE,gBAAkB,CACnB,AACD,aACE,mBAAoB,AACpB,YAAc,CACf,AACD,uCACI,iBAAmB,CACtB,AACD,sCACI,WAAa,CAChB,AACD,+BACI,gBAAiB,AACjB,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,mCACM,WAAa,CAClB,AACD,oCACM,UAAW,AACX,YAAc,CACnB,AACD,0CACM,aAAe,CACpB,AACD,iCACI,SAAU,AACV,UAAY,CACf",file:"groupOrder.vue",sourcesContent:["\n.query-container {\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n  position: relative;\n  overflow: hidden;\n  transition: height .5s;\n}\n.query-container .query-btn {\n    position: absolute;\n    right: 40px;\n    bottom: 18px;\n}\n.query-container .draggable {\n    position: absolute;\n    right: 0;\n    bottom: 18px;\n    width: 30px;\n    height: 30px;\n    padding-left: 5px;\n    line-height: 30px;\n    text-align: center;\n    border: 1px solid #ccc;\n    opacity: 0.5;\n    display: none;\n    border-radius: 50%;\n}\n.query-container:hover .draggable {\n    display: block;\n}\n.manage-container {\n  margin-top: 20px;\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n}\n.manage-container .el-dialog_wrapper {\n    left: 200px;\n    top: 50px;\n}\n.el-button {\n  width: 88px;\n}\n.el-table {\n  margin-top: 20px;\n}\n.page-container {\n  text-align: right;\n  padding-top: 10px;\n}\n.page-container .el-pagination {\n    padding-right: 0;\n}\n.reset-dialog-width .el-dialog {\n  width: 30%;\n}\n.reset-dialog-width .el-dialog p {\n    text-align: center;\n}\n.el-dialog__body {\n  margin: 20px 0 5px 0;\n  border-top: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n}\n.v-modal {\n  transition: all .1s;\n  left: 200px;\n  top: 50px;\n}\n.svg-icon {\n  margin-right: 5px;\n}\n.group-order {\n  margin: 30px auto 0;\n  width: 1120px;\n}\n.group-order .manage-container .el-col {\n    margin-right: 30px;\n}\n.group-order .large-dialog .el-dialog {\n    width: 900px;\n}\n.group-order li.upload-process {\n    list-style: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.group-order li.upload-process > div {\n      width: 300px;\n}\n.group-order li.upload-process > span {\n      color: red;\n      display: none;\n}\n.group-order li.upload-process:hover > span {\n      display: block;\n}\n.group-order .el-dialog__wrapper {\n    top: 50px;\n    left: 200px;\n}\n"],sourceRoot:""}])},c2Ea:function(e,t,r){"use strict";var i=r("mvHQ"),a=r.n(i),o=r("Dd8w"),n=r.n(o),l=r("7t+N"),s=r.n(l),d=r("ijSo"),c=r("TIfe"),u=r("0xDb"),p=r("NYxO"),h=r("9q5R");t.a={data:function(){return{pageId:"30201",form:{retail:"",startDate:"",endDate:"",orderNum:"",status:""},retails:[],retailStatus:[],noTableData:"",loading:!1,tableData:[],currentPage:1,pageSize:20,totalRows:0,multipleSelection:[],dialogNewAddVisible:!1,dialogOrderVerifyVisible:!1,dialogAddPreviewVisible:!1,groupOrder:{retail:""},fileList3:[],verifyInfo:{},groupOrderNo:"",uploadProcessValue:0,uploadHeaders:{Authorization:r.i(c.a)()},importResultData:{},IRtableData:[],IRTotalrows:0,IRPageSize:10,IRCurrentPage:1,IROrderNo:"",refresh:"refresh",uploadUrl:r.i(d.e)(),orderCancelBtnShow:!1,confirChargeBtnShow:!1,orderCheckBtnShow:!1,uploadSuccess:!1,btnLoading:!1,queryContainerShrink:!1,IRBtnShow:!0,IRTitle:"新增确认预览"}},created:function(){this.getDistributors(),this.getStatus(),this.getGroupOrders()},computed:n()({},r.i(p.c)({userInfo:function(e){return e.user.userInfo},isCollapse:function(e){return e.app.sidebar.opened}}),{uploadData:function(){return{distributorCode:this.groupOrder.retail,groupOrderNo:this.groupOrderNo}},tableHeight:function(){return this.tableData.length<=5?400:40*(this.tableData.length+1)+18}}),methods:{getDistributors:function(){var e=this;r.i(d.a)({}).then(function(t){"0000"===t.errcode&&(e.retails=t.result)})},getStatus:function(){var e=this;r.i(d.f)().then(function(t){"0000"===t.errcode&&(e.retailStatus=t.result)})},getGroupOrders:function(e){var t=this,i=e||1,a=void 0,o=void 0;a=this.form.startDate?r.i(u.b)(this.form.startDate):"",o=this.form.endDate?r.i(u.b)(this.form.endDate):"";var n={pageNo:i,pageSize:this.pageSize,distributorCode:this.form.retail,groupOrderNo:this.form.orderNum,beginApplyDate:a,endApplyDate:o,status:this.form.status};this.loading=!0,r.i(d.g)({params:n}).then(function(e){"0000"===e.errcode&&(t.totalRows=e.result.orders.totalCount,t.tableData=e.result.orders.rows.filter(function(e){return e.count=e.totalChargeCount+"/"+e.factChargeCount,e.money=e.totalChargeBalance+"/"+e.factChargeBalance,e}),t.loading=!1)})},clear:function(){this.form.retail="",this.form.startDate="",this.form.endDate="",this.form.orderNum="",this.form.status=""},query:function(){this.getGroupOrders(this.currentPage)},newAdd:function(){this.groupOrderNo="",this.dialogNewAddVisible=!0},againImport:function(){this.dialogAddPreviewVisible=!1,this.dialogNewAddVisible=!0},download:function(){var e=void 0,t=void 0;e=this.form.startDate?r.i(u.b)(this.form.startDate):"",t=this.form.endDate?r.i(u.b)(this.form.endDate):"";var i={pageNo:this.currentPage,pageSize:this.pageSize,distributorCode:this.form.retail,beginApplyDate:e,endApplyDate:t,groupOrderNo:this.form.orderNum,status:this.form.status},o=s()("<form>");o.attr({style:"display:none",target:"",method:"post",action:r.i(d.h)()});var n=s()("<input>");n.attr({type:"hidden",name:"Authorization",value:r.i(c.a)()});var l=s()("<input>");l.attr({type:"hidden",name:"query",value:a()(i)}),s()("body").append(o),o.append(n),o.append(l),o.submit()},IRDownload:function(){return r.i(d.i)({params:this.groupOrderNo})+"?Authorization="+r.i(c.a)()},checkDetail:function(){1===this.multipleSelection.length?"1"===this.multipleSelection[0].status||"2"===this.multipleSelection[0].status?(this.groupOrderNo=this.multipleSelection[0].groupOrderNo,this.getImportResult(),this.dialogAddPreviewVisible=!0):this.$router.push({path:"/cardVoucher/cardGBManage/orderDetail",query:{groupOrderNo:this.multipleSelection[0].groupOrderNo}}):this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条订单查看":"只能选择一条订单查看",duration:600})},orderVerify:function(){1===this.multipleSelection.length?(this.verifyInfo=this.multipleSelection[0],"3"===this.verifyInfo.status?(this.verifyInfo.remark="",this.dialogOrderVerifyVisible=!0):this.$notify.warning({title:"消息",message:"请先确认申请",duration:600})):this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条订单查看":"只能选择一条订单查看",duration:600})},confirmCharge:function(){var e=this;1===this.multipleSelection.length?"4"===this.multipleSelection[0].status?this.$confirm("是否确认充值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){r.i(d.j)({params:e.multipleSelection[0].id}).then(function(t){"0000"===t.errcode&&(e.$notify({title:"成功",message:"充值成功",type:"success",duration:1e3}),e.getGroupOrders())})}).catch(function(){}):this.$notify.warning({title:"消息",message:"无操作权限",duration:600}):this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条订单查看":"只能选择一条订单查看",duration:600})},orderCancel:function(){var e=this;1===this.multipleSelection.length?"1"===this.multipleSelection[0].status&&this.userInfo.id===this.multipleSelection[0].createUserId?(this.isCollapse||setTimeout(function(){e.$nextTick(function(){document.querySelector(".v-modal").style.left="36px"})},100),window.scrollTo(0,0),this.$confirm("是否确认撤销？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){r.i(d.k)({params:e.multipleSelection[0].id}).then(function(t){"0000"===t.errcode&&(e.$notify({title:"成功",message:"撤销成功",type:"success",duration:1e3}),e.getGroupOrders())})}).catch(function(){})):this.$notify.warning({title:"消息",message:"无操作权限",duration:600}):this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条用户查看":"只能选择一条用户查看",duration:600})},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,this.multipleSelection.slice(0,this.multipleSelection.length-1).forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)})},handleCurrentChange:function(e){this.currentPage=e,this.getGroupOrders(this.currentPage)},handleSizeChange:function(e){this.pageSize=e,this.getGroupOrders(this.currentPage)},clearNewAdd:function(){this.groupOrder.retail="",this.fileList3=[],this.uploadProcessValue=0},handleChange:function(e,t){this.fileList3=t.slice(-3)},handleProcess:function(e,t,r){this.btnLoading=!0},handleSuccess:function(e,t,i){var a=this;"0000"===e.errcode?(setTimeout(function(){a.btnLoading=!1,a.uploadSuccess=!0},3e3),this.groupOrderNo=e.hashMap.groupOrderNo,this.timer=setInterval(function(){r.i(d.l)({params:a.groupOrderNo}).then(function(e){"0000"===e.errcode&&(a.uploadProcessValue=Number(e.hashMap.rate))})},3e3)):(this.btnLoading=!1,this.$message({message:e.errmsg,type:"error",duration:3e3}))},handleError:function(e,t,r){e&&console.log(e)},orderCheck:function(e){var t=this,i={orderId:this.verifyInfo.id,processDesc:this.verifyInfo.remark,isPassed:e};r.i(d.m)({params:i}).then(function(e){"0000"===e.errcode&&(t.$notify({title:"成功",message:"审核成功",type:"success",duration:1e3}),t.dialogOrderVerifyVisible=!1,t.getGroupOrders(t.currentPage))})},getImportResult:function(e){var t=this,i=e||1,a={pageNo:i,pageSize:this.IRPageSize,groupOrderNo:this.groupOrderNo};r.i(d.n)({params:a}).then(function(e){t.importResultData=e.result.order,t.IRtableData=e.result.orderDetail.rows,t.IRTotalrows=e.result.orderDetail.totalCount,t.IROrderNo=e.result.order.orderNo,t.dialogNewAddVisible=!1,t.dialogAddPreviewVisible=!0})},IRhandleCurrentChange:function(e){this.IRCurrentPage=e,this.getImportResult(this.IRCurrentPage)},IRhandleSizeChange:function(e){this.IRPageSize=e,this.getImportResult(this.IRCurrentPage)},IRApplication:function(){var e=this;this.$confirm("是否确认申请？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){r.i(d.o)({params:e.IROrderNo}).then(function(t){"0000"===t.errcode&&(e.$notify({title:"成功",message:"申请成功",type:"success",duration:1e3}),e.dialogAddPreviewVisible=!1,e.getGroupOrders(e.currentPage))}).catch(function(){e.dialogAddPreviewVisible=!1})}).catch(function(){})},handleSelectAll:function(){this.$refs.multipleTable.clearSelection()},downloadTemplate:function(){var e=s()("<form>");e.attr({style:"display:none",target:"",method:"get",action:r.i(d.p)()});var t=s()("<input>");t.attr({type:"hidden",name:"Authorization",value:r.i(c.a)()}),s()("body").append(e),e.append(t),e.submit()},clearFileList:function(){this.fileList3=[],this.$refs.uploadBtn.clearFiles()},shrinkQueryArea:function(){this.queryContainerShrink?(this.$refs.queryContainer.style.height="166px",this.queryContainerShrink=!1):(this.$refs.queryContainer.style.height="60px",this.queryContainerShrink=!0)},openNewAddModal:function(){window.scrollTo(0,0),this.isCollapse||this.$nextTick(function(){document.querySelector(".v-modal").style.left="36px"})}},watch:{uploadProcessValue:function(e){e>=100&&(clearInterval(this.timer),this.getImportResult(),this.getGroupOrders())},multipleSelection:function(e){e[0]&&"1"===e[0].status&&this.userInfo.id!==e[0].createUserId?this.orderCancelBtnShow=!0:this.orderCancelBtnShow=!1,e[0]&&"4"===e[0].status?this.confirChargeBtnShow=!0:this.confirChargeBtnShow=!1,e[0]&&"3"===e[0].status?this.orderCheckBtnShow=!0:this.orderCheckBtnShow=!1,e[0]&&"2"===e[0].status?(this.IRBtnShow=!1,this.IRTitle="导入结果"):(this.IRBtnShow=!0,this.IRTitle="新增确认预览")},isCollapse:function(e){document.querySelector(".v-modal")&&(document.querySelector(".v-modal").style.left=e?"200px":"36px")}},mixins:[h.a]}},"e7+o":function(e,t,r){"use strict";function i(e){r("4yUY")}Object.defineProperty(t,"__esModule",{value:!0});var a=r("c2Ea"),o=r("AYY7"),n=r("VU/8"),l=i,s=n(a.a,o.a,l,null,null);t.default=s.exports},ijSo:function(e,t,r){"use strict";function i(e){var t=e.params;return r.i(v.a)({url:"/distributor/queryAllDistributors",method:"post",data:t})}function a(){return r.i(v.a)({url:"card/groupOrder/getOrderStatusDict",method:"get"})}function o(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/processRate/"+t,method:"get"})}function n(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/importResult",method:"post",data:t})}function l(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/confirmApply/"+t,method:"get"})}function s(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/list",method:"post",data:t})}function d(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/verify",method:"post",data:t})}function c(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/revoke/"+t,method:"get"})}function u(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/charge/"+t,method:"get"})}function p(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/detail/list",method:"post",data:t})}function h(e){var t=e.params;return r.i(v.a)({url:"/card/groupOrder/detail/charge/"+t,method:"get"})}function g(){return"http://10.10.2.20:80/microservice-dist-provider/card/groupOrder/add"}function m(){return"http://10.10.2.20:80/microservice-dist-provider/card/groupOrder/download"}function f(){return"http://10.10.2.20:80/microservice-dist-provider/card/groupOrder/detail/download"}function A(e){return"http://10.10.2.20:80/microservice-dist-provider/card/groupOrder/importResult/download/"+e.params}function b(){return"http://10.10.2.20:80/microservice-dist-provider/card/groupOrder/template/download?Authorization="+r.i(C.a)()}t.a=i,t.f=a,t.l=o,t.n=n,t.o=l,t.g=s,t.m=d,t.k=c,t.j=u,t.b=p,t.d=h,t.e=g,t.h=m,t.c=f,t.i=A,t.p=b;var v=r("Vo7i"),C=r("TIfe")}});
//# sourceMappingURL=19.e6d3962133b194126c46.js.map
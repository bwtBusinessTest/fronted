webpackJsonp([1],{"2QJc":function(t,e,a){"use strict";(function(t){var r=a("Dd8w"),i=a.n(r),l=a("NYxO"),o={data:function(){return{scrollHeight:0,queryContainerShrink:!1}},computed:i()({},a.i(l.c)({isCollapse:function(t){return t.app.sidebar.opened}})),methods:{openNewAddModal:function(){var e=this;setTimeout(function(){e.isCollapse?document.querySelector(".v-modal")&&(document.querySelector(".v-modal").style.left="200px",t(".el-dialog__wrapper").css("left","200px")):(e.$nextTick(function(){document.querySelector(".v-modal").style.left="36px"}),document.querySelector(".v-modal")&&(document.querySelector(".v-modal").style.left="36px",t(".el-dialog__wrapper").css("left","36px"))),document.querySelector(".v-modal")&&(e.scrollHeight=t(document).scrollTop(),e.scrollHeight>=0&&e.scrollHeight<50?(document.querySelector(".v-modal").style.top=50-e.scrollHeight+"px",t(".el-dialog__wrapper").css("top",50-e.scrollHeight+"px")):(document.querySelector(".v-modal").style.top="0px",t(".el-dialog__wrapper").css("top","0px")))},100)},shrinkQueryArea:function(t){this.queryContainerShrink?(this.$refs.queryContainer.style.height=t+"px",this.queryContainerShrink=!1):(this.$refs.queryContainer.style.height="60px",this.queryContainerShrink=!0)}},watch:{isCollapse:function(e){document.querySelector(".v-modal")&&(e?(document.querySelector(".v-modal").style.left="200px",t(".el-dialog__wrapper").css("left","200px")):(document.querySelector(".v-modal").style.left="36px",t(".el-dialog__wrapper").css("left","36px")))}}};e.a=o}).call(e,a("7t+N"))},"9bBU":function(t,e,a){a("mClu");var r=a("FeBl").Object;t.exports=function(t,e,a){return r.defineProperty(t,e,a)}},"9q5R":function(t,e,a){"use strict";(function(t){var r=a("Dd8w"),i=a.n(r),l=a("NYxO"),o={computed:i()({},a.i(l.b)(["buttonAuth"]),{buttonVisible:function(){var t=this,e={};return this.buttonAuth.forEach(function(a){a.menuParentCode===t.pageId&&(e[a.menuCode]=!0)}),e}}),mounted:function(){t(".el-dialog").draggable()}};e.a=o}).call(e,a("7t+N"))},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},GjP9:function(t,e,a){"use strict";function r(t){var e=t.params;return a.i(d.a)({url:"/card/queryCardList",method:"post",data:e})}function i(t){var e=t.params;return a.i(d.a)({url:"/card/add",method:"post",data:e})}function l(t){var e=t.params;return a.i(d.a)({url:"/card/modify",method:"post",data:e})}function o(t){var e=t.params;return a.i(d.a)({url:"/dict/getDictByCode",method:"post",data:e})}function n(t){var e=t.params;return a.i(d.a)({url:"/treeDict/getCityTreeDictTree",method:"post",data:e})}e.a=r,e.b=i,e.c=l,e.d=o,e.e=n;var d=a("Vo7i")},ONEO:function(t,e,a){"use strict";function r(t){a("mCdn")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("kQVw"),l=a("s3zQ"),o=a("VU/8"),n=r,d=o(i.a,l.a,n,null,null);e.default=d.exports},RbRS:function(t,e,a){"use strict";function r(t){var e=t.params;return a.i(d.a)({url:"/dict/getDictByCode",method:"post",data:e})}function i(t){var e=t.params;return a.i(d.a)({url:"/distributorCard/queryDistributorCardList",method:"post",data:e})}function l(t){var e=t.params;return a.i(d.a)({url:"/distributorCard/queryStocksByPublish",method:"post",data:e})}function o(t){var e=t.params;return a.i(d.a)({url:"/distributorCard/add",method:"post",data:e})}function n(t){var e=t.params;return a.i(d.a)({url:"/distributorCard/modify",method:"post",data:e})}e.a=r,e.b=i,e.c=l,e.d=o,e.e=n;var d=a("Vo7i")},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var r=a("C4MV"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},dGR0:function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,".query-container{padding:10px;box-shadow:0 0 4px #ccc;position:relative;overflow:hidden;transition:height .5s}.query-container .query-btn{position:absolute;right:40px;bottom:18px}.query-container .draggable{position:absolute;right:0;bottom:18px;width:30px;height:30px;padding-left:5px;line-height:30px;text-align:center;border:1px solid #ccc;opacity:.5;display:none;border-radius:50%}.query-container:hover .draggable{display:block}.manage-container{margin-top:20px;padding:10px;box-shadow:0 0 4px #ccc}.manage-container .el-dialog_wrapper{left:200px;top:50px}.el-button{width:88px}.el-table{margin-top:20px}.page-container{text-align:right;padding-top:10px}.page-container .el-pagination{padding-right:0}.reset-dialog-width .el-dialog{width:30%}.reset-dialog-width .el-dialog p{text-align:center}.el-dialog__body{margin:20px 0 5px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.v-modal{transition:all .1s;left:200px;top:50px}.svg-icon{margin-right:5px}.retailCard-manage{margin:30px auto 0;width:1120px}.retailCard-manage .demo-ruleForm{margin:auto}.retailCard-manage .el-dialog__wrapper{top:50px;left:200px}.el-table .warning-row{background:#ff0}.el-table .success-row{background:#f0f9eb}.el-table .cell{white-space:nowrap!important}.el-dialog{width:580px}.el-table--enable-row-hover .el-table__body tr.warning-row:hover>td{background:#ff0!important}.el-loading-mask{z-index:90}","",{version:3,sources:["/Users/liwenhua/Documents/bwton/SourceCode/01.trunk/back-manage/src/views/retailCardManage/index.vue"],names:[],mappings:"AACA,iBACE,aAAc,AACd,wBAAyB,AACzB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAuB,CACxB,AACD,4BACI,kBAAmB,AACnB,WAAY,AACZ,WAAa,CAChB,AACD,4BACI,kBAAmB,AACnB,QAAS,AACT,YAAa,AACb,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,kBAAmB,AACnB,sBAAuB,AACvB,WAAa,AACb,aAAc,AACd,iBAAmB,CACtB,AACD,kCACI,aAAe,CAClB,AACD,kBACE,gBAAiB,AACjB,aAAc,AACd,uBAAyB,CAC1B,AACD,qCACI,WAAY,AACZ,QAAU,CACb,AACD,WACE,UAAY,CACb,AACD,UACE,eAAiB,CAClB,AACD,gBACE,iBAAkB,AAClB,gBAAkB,CACnB,AACD,+BACI,eAAiB,CACpB,AACD,+BACE,SAAW,CACZ,AACD,iCACI,iBAAmB,CACtB,AACD,iBACE,kBAAqB,AACrB,0BAA2B,AAC3B,4BAA8B,CAC/B,AACD,SACE,mBAAoB,AACpB,WAAY,AACZ,QAAU,CACX,AACD,UACE,gBAAkB,CACnB,AACD,mBACE,mBAAoB,AACpB,YAAc,CACf,AACD,kCACI,WAAa,CAChB,AACD,uCACI,SAAU,AACV,UAAY,CACf,AACD,uBACE,eAAmB,CACpB,AACD,uBACE,kBAAoB,CACrB,AACD,gBACE,4BAA+B,CAChC,AACD,WACE,WAAa,CACd,AACD,oEACE,yBAA8B,CAC/B,AACD,iBACE,UAAY,CACb",file:"index.vue",sourcesContent:["\n.query-container {\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n  position: relative;\n  overflow: hidden;\n  transition: height .5s;\n}\n.query-container .query-btn {\n    position: absolute;\n    right: 40px;\n    bottom: 18px;\n}\n.query-container .draggable {\n    position: absolute;\n    right: 0;\n    bottom: 18px;\n    width: 30px;\n    height: 30px;\n    padding-left: 5px;\n    line-height: 30px;\n    text-align: center;\n    border: 1px solid #ccc;\n    opacity: 0.5;\n    display: none;\n    border-radius: 50%;\n}\n.query-container:hover .draggable {\n    display: block;\n}\n.manage-container {\n  margin-top: 20px;\n  padding: 10px;\n  box-shadow: 0 0 4px #ccc;\n}\n.manage-container .el-dialog_wrapper {\n    left: 200px;\n    top: 50px;\n}\n.el-button {\n  width: 88px;\n}\n.el-table {\n  margin-top: 20px;\n}\n.page-container {\n  text-align: right;\n  padding-top: 10px;\n}\n.page-container .el-pagination {\n    padding-right: 0;\n}\n.reset-dialog-width .el-dialog {\n  width: 30%;\n}\n.reset-dialog-width .el-dialog p {\n    text-align: center;\n}\n.el-dialog__body {\n  margin: 20px 0 5px 0;\n  border-top: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n}\n.v-modal {\n  transition: all .1s;\n  left: 200px;\n  top: 50px;\n}\n.svg-icon {\n  margin-right: 5px;\n}\n.retailCard-manage {\n  margin: 30px auto 0;\n  width: 1120px;\n}\n.retailCard-manage .demo-ruleForm {\n    margin: auto;\n}\n.retailCard-manage .el-dialog__wrapper {\n    top: 50px;\n    left: 200px;\n}\n.el-table .warning-row {\n  background: yellow;\n}\n.el-table .success-row {\n  background: #f0f9eb;\n}\n.el-table .cell {\n  white-space: nowrap !important;\n}\n.el-dialog {\n  width: 580px;\n}\n.el-table--enable-row-hover .el-table__body tr.warning-row:hover > td {\n  background: yellow !important;\n}\n.el-loading-mask {\n  z-index: 90;\n}\n"],sourceRoot:""}])},kQVw:function(t,e,a){"use strict";var r=a("Dd8w"),i=a.n(r),l=a("bOdI"),o=a.n(l),n=a("RbRS"),d=a("yBci"),s=a("GjP9"),c=a("9q5R"),u=a("2QJc"),m=a("NYxO");e.a={data:function(){var t,e=this,a=function(t,e,a){return/^[0-9]\d*$/.test(e)||""!=!e?a():a(new Error("只能输入正整数且不能为空"))},r=function(t,e,a){var r=/^[0-9]\d*$/;return/^-[1-9]\d*$/.test(e)?a():r.test(e)||""!=!e?a():a(new Error("只能输入数字且不能为空"))},i=function(t,a,r){parseInt(a-0)>parseInt(e.cardData.cardAmount)?r(new Error("不能大于总库存量")):r()},l=function(t,e,a){return/^[0-9]+([.]{1}[0-9]{1,3}){0,1}$/.test(e)||""!=!e?a():a(new Error("输数字且不能超过三位小数"))},n=function(t,e,a){return/[\!@#\$%\^&\*]+/g.test(e)?a(new Error("不能含有特殊字符")):a()},d=function(t,e,a){return"string"==typeof e?e.length>=10?a(new Error("不能超过十个字符")):a():parseInt(e)>9999999999?a(new Error("最大十位数")):a()};return t={pageId:"30302",dialogAddVisible:!1,dialogEditVisible:!1,multipleSelection:[{}],retailCardData:{distributorName:"",cardPublish:""},tableData:[],loading:!1,noTableData:"",total:0},o()(t,"loading",!0),o()(t,"publicMenu",[]),o()(t,"retailMenu",[]),o()(t,"cardNameMenu",[]),o()(t,"form",{cardPublish:"",cardName:"",distributorInfoCode:"",pageNo:1,pageSize:20}),o()(t,"cardPublish",""),o()(t,"addForm",{cardId:"",distributorInfoCode:"",cardAmount:"",settlementBalance:"",saleLimitDay:"0",thresholdAmount:"",status:""}),o()(t,"cardData",{cardCount:"",cardBalance:"",cardAmount:""}),o()(t,"editForm",{id:"",cardId:"",distributorInfoCode:"",cardAmount:"",settlementBalance:"",saleLimitDay:0,thresholdAmount:0,status:"",addCount:""}),o()(t,"able",!1),o()(t,"formRules",{cardName:[{validator:n,trigger:"blur"},{max:20,message:"最长20个字符",trigger:"blur"}]}),o()(t,"newRetailCardRules",{distributorInfoCode:[{required:!0,message:"请选择分销商",trigger:"change"}],cardId:[{required:!0,message:"暂无该发行方的发行卡券"}],settlementBalance:[{required:!0,message:"请输入结算价",trigger:"blur"},{validator:l,trigger:"blur"},{max:10,message:"最长10个字符",trigger:"change"}],cardAmount:[{required:!0,message:"请输入分配库存",trigger:"blur"},{validator:a,trigger:"blur"},{validator:i,trigger:"blur"},{max:10,message:"最长10个字符",trigger:"change"}],thresholdAmount:[{required:!0,message:"请输入库存阈值",trigger:"blur"},{validator:a,trigger:"blur"},{max:10,message:"最长10个字符",trigger:"change"}],saleLimitDay:[{required:!0,message:"请输入日售限额",trigger:"blur"},{validator:a,trigger:"blur"},{max:10,message:"最长10个字符",trigger:"change"}],status:[{required:!0,message:"请选择分销商状态",trigger:"blur"}]}),o()(t,"editRetailRules",{settlementBalance:[{required:!0,message:"请输入结算价"},{validator:l,trigger:"blur"},{validator:d,trigger:"blur"}],addCount:[{validator:r,trigger:"blur"},{validator:i,trigger:"blur"},{validator:d,trigger:"blur"}],thresholdAmount:[{required:!0,message:"请输入库存阈值"},{validator:a,trigger:"blur"},{validator:d,trigger:"blur"}],saleLimitDay:[{required:!0,message:"请输入日售限额"},{validator:a,trigger:"blur"},{validator:d,trigger:"blur"}],status:[{required:!0,message:"请选择分销商状态"}]}),o()(t,"dialogVisibles",["dialogAddVisible","dialogEditVisible"]),o()(t,"scrollHeight",0),t},created:function(){this.getPulicMenu(),this.getRetailMenu(),this.getDataList(!0),this.accordingPublicGetCard()},computed:i()({},a.i(m.c)({openModals:function(t){return t.app.openModals}})),methods:i()({getPulicMenu:function(){var t=this,e={code:"1036"};a.i(n.a)({params:e}).then(function(e){"0000"===e.errcode&&(t.publicMenu=e.result,t.publicMenu.length>0&&(t.cardPublish=t.publicMenu[0].caption))})},getRetailMenu:function(){var t=this,e={};a.i(d.e)({params:e}).then(function(e){"0000"===e.errcode&&(t.retailMenu=e.result)})},cardSearchTerm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.searchData()})},getDataList:function(t){var e=this,r=this.form;a.i(n.b)({params:r}).then(function(a){if("0000"===a.errcode&&(e.total=a.result.totalCount,e.tableData=a.result.rows,e.loading=!1,t)){var r=e.openModals.find(function(t){return t.pageId===e.pageId});r&&"dialogAddVisible"===r.openModal?(e.addForm=r.data,e[r.openModal]=!0):r&&e.$nextTick(function(){r.data.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(e.tableData.find(function(e){return e.id===t.id}))}),"dialogEditVisible"===r.openModal&&e.retailCardEdit()})}})},searchData:function(){this.form.pageNo=1,this.getDataList()},currentChange:function(t){var e=this;this.form.pageNo=t;var r=this.form;a.i(n.b)({params:r}).then(function(t){"0000"===t.errcode&&(e.tableData=t.result.rows)})},sizeChange:function(t){var e=this;this.form.pageSize=t;var r=this.form;a.i(n.b)({params:r}).then(function(t){"0000"===t.errcode&&(e.tableData=t.result.rows)})},accordingPublicGetCard:function(){var t=this,e={cardPublish:this.cardPublish};a.i(n.c)({params:e}).then(function(e){"0000"===e.errcode&&(t.cardNameMenu=e.result,t.cardNameMenu.length>0?(t.addForm.cardId=t.cardNameMenu[0].id,t.getCarDataById(t.addForm.cardId)):t.addForm.cardId="")})},getCarDataById:function(t){var e=this,r={id:t};this.able=!0,a.i(s.a)({params:r}).then(function(t){e.cardData=t.result.rows[0],e.able=!1})},changeCardId:function(){this.addForm.cardAmount="",this.addForm.settlementBalance="",this.addForm.saleLimitDay="0",this.addForm.thresholdAmount="",this.getCarDataById(this.addForm.cardId)},retailCardNewAdd:function(){this.accordingPublicGetCard(),this.dialogAddVisible=!0},submitAddForm:function(t){var e=this;this.$refs[t].validate(function(r){if(!r)return console.log("error submit!!"),!1;var i=e.addForm;a.i(n.d)({params:i}).then(function(a){"0000"===a.errcode&&(e.$notify.success({title:"消息",message:"添加成功",duration:600}),e.dialogAddVisible=!1,e.searchData(),e.resetForm(t))}).catch(function(){})})},submitEditForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.editForm.cardAmount+=+e.editForm.addCount,e.editForm.cardAmount.toString(),delete e.editForm.addCount;var r=e.editForm;a.i(n.e)({params:r}).then(function(t){"0000"===t.errcode&&(e.$notify.success({title:"消息",message:"编辑成功",duration:600}),e.dialogEditVisible=!1,e.searchData(),e.centerDialogVisible=!0)})})},retailCardEdit:function(){1===this.multipleSelection.length&&this.multipleSelection[0].cardId?(this.editForm.addCount="",this.getCarDataById(this.multipleSelection[0].cardId),this.dialogEditVisible=!0):this.$notify.warning({title:"消息",message:0===this.multipleSelection.length?"请选择一条数据修改":"只能选择一条数据修改",duration:600})},handleSelectionChange:function(t){if(this.multipleSelection=t,t&&t.length>0)for(var e in this.editForm)this.editForm[e]=this.multipleSelection[0][e];else this.multipleSelection=[{}]},resetForm:function(t){this.$refs[t].resetFields(),this.dialogAddVisible=!1,this.dialogEditVisible=!1},tableRowClassName:function(t,e){return t.thresholdAmount-t.cardAmount>0?"warning-row":""}},a.i(m.d)({addOpenModals:"ADD_OPEN_MODALS",removeOpenModals:"REMOVE_OPEN_MODALS"})),mixins:[c.a,u.a],beforeRouteLeave:function(t,e,a){var r,i=this,l=this.dialogVisibles.find(function(t){return i[t]});l?(r=l===this.dialogVisibles[0]?this.addForm:this.multipleSelection,this.removeOpenModals({pageId:this.pageId}),this.addOpenModals({pageId:this.pageId,openModal:l,data:r})):this.removeOpenModals({pageId:this.pageId}),a()}}},mCdn:function(t,e,a){var r=a("dGR0");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("6276d5f9",r,!0)},mClu:function(t,e,a){var r=a("kM2E");r(r.S+r.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},s3zQ:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"retailCard-manage"},[a("div",{staticClass:"query-container"},[a("el-form",{ref:"searchForm",staticStyle:{width:"1072px",margin:"auto"},attrs:{inline:!0,model:t.form,rules:t.formRules}},[a("el-form-item",{attrs:{label:"发行方:",prop:"cardPublish"}},[a("el-select",{attrs:{clearable:""},model:{value:t.form.cardPublish,callback:function(e){t.form.cardPublish=e},expression:"form.cardPublish"}},t._l(t.publicMenu,function(t){return a("el-option",{key:t.value,attrs:{label:t.caption,value:t.caption}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"卡券名称:",prop:"cardName"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.cardName,callback:function(e){t.form.cardName=e},expression:"form.cardName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分销商:",prop:"distributorInfoCode"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"输入搜索或选择"},model:{value:t.form.distributorInfoCode,callback:function(e){t.form.distributorInfoCode=e},expression:"form.distributorInfoCode"}},t._l(t.retailMenu,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{width:"1072px"},attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:3}},[t.buttonVisible[3030203]?a("el-button",{attrs:{size:"small",type:"primary",icon:"delete"},on:{click:function(e){t.resetForm("searchForm")}}},[t._v("清空")]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:3}},[t.buttonVisible[3030204]?a("el-button",{attrs:{size:"small",type:"primary",icon:"search"},on:{click:function(e){t.cardSearchTerm("searchForm")}}},[t._v("查询")]):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"manage-container"},[a("el-row",{staticStyle:{width:"1072px"},attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:3}},[t.buttonVisible[3030205]?a("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:t.retailCardNewAdd}},[t._v("新增")]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:3}},[t.buttonVisible[3030208]?a("el-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:t.retailCardEdit}},[t._v("修改")]):t._e()],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName,border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","empty-text":t.noTableData,height:"390"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"分销商",prop:"distributorName"}}),t._v(" "),a("el-table-column",{attrs:{label:"卡券Id",prop:"cardId"}}),t._v(" "),a("el-table-column",{attrs:{label:"城市",prop:"cityName"}}),t._v(" "),a("el-table-column",{attrs:{label:"发行方",prop:"cardPublish"}}),t._v(" "),a("el-table-column",{attrs:{label:"卡券名称",prop:"cardName"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格次数",prop:"cardCount"}}),t._v(" "),a("el-table-column",{attrs:{label:"单价",prop:"cardBalance"}}),t._v(" "),a("el-table-column",{attrs:{label:"结算价",prop:"settlementBalance"}}),t._v(" "),a("el-table-column",{attrs:{label:"库存阈值",prop:"thresholdAmount"}}),t._v(" "),a("el-table-column",{attrs:{label:"可售库存",prop:"cardAmount"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"statusDesc"}})],1),t._v(" "),a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.form.pageSize,"page-sizes":[10,20,30]},on:{"current-change":t.currentChange,"size-change":t.sizeChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"分销商卡券新增",visible:t.dialogAddVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogAddVisible=e},open:t.openNewAddModal}},[a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",staticStyle:{width:"600px",margin:"auto"},attrs:{inline:!0,model:t.addForm,"label-width":"90px","label-position":"right",rules:t.newRetailCardRules}},[a("el-form-item",{attrs:{label:"分销商:",prop:"distributorInfoCode"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",placeholder:"输入搜索或选择"},model:{value:t.addForm.distributorInfoCode,callback:function(e){t.addForm.distributorInfoCode=e},expression:"addForm.distributorInfoCode"}},t._l(t.retailMenu,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"发行方:"}},[a("el-select",{staticStyle:{width:"150px"},model:{value:t.cardPublish,callback:function(e){t.cardPublish=e},expression:"cardPublish"}},t._l(t.publicMenu,function(t){return a("el-option",{key:t.value,attrs:{label:t.caption,value:t.caption}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"卡券名称:",prop:"cardId"}},[a("el-select",{staticStyle:{width:"150px"},on:{change:function(e){t.changeCardId()}},model:{value:t.addForm.cardId,callback:function(e){t.addForm.cardId=e},expression:"addForm.cardId"}},t._l(t.cardNameMenu,function(t){return a("el-option",{key:t.id,attrs:{label:t.cardName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格次数:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.cardData.cardCount,callback:function(e){t.cardData.cardCount=e},expression:"cardData.cardCount"}},[a("template",{slot:"append"},[t._v("次")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"成本单价:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.cardData.cardBalance,callback:function(e){t.cardData.cardBalance=e},expression:"cardData.cardBalance"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"结算价:",prop:"settlementBalance"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.able},model:{value:t.addForm.settlementBalance,callback:function(e){t.addForm.settlementBalance=e},expression:"addForm.settlementBalance"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"总库存量:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.cardData.cardAmount,callback:function(e){t.cardData.cardAmount=e},expression:"cardData.cardAmount"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"分配库存:",prop:"cardAmount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.able},model:{value:t.addForm.cardAmount,callback:function(e){t.addForm.cardAmount=e},expression:"addForm.cardAmount"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"库存阈值:",prop:"thresholdAmount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.able},model:{value:t.addForm.thresholdAmount,callback:function(e){t.addForm.thresholdAmount=e},expression:"addForm.thresholdAmount"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"日售限额:",prop:"saleLimitDay"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.able},model:{value:t.addForm.saleLimitDay,callback:function(e){t.addForm.saleLimitDay=e},expression:"addForm.saleLimitDay"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:t.addForm.status,callback:function(e){t.addForm.status=e},expression:"addForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.resetForm("addForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitAddForm("addForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"分销商卡券编辑",visible:t.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditVisible=e},open:t.openNewAddModal}},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",staticStyle:{width:"600px",margin:"auto"},attrs:{inline:!0,model:t.editForm,"label-width":"90px","label-position":"right",rules:t.editRetailRules}},[a("el-form-item",{attrs:{label:"分销商:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.multipleSelection[0].distributorName,callback:function(e){t.multipleSelection[0].distributorName=e},expression:"multipleSelection[0].distributorName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发行方:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.multipleSelection[0].cardPublish,callback:function(e){t.multipleSelection[0].cardPublish=e},expression:"multipleSelection[0].cardPublish"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡券名称:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.multipleSelection[0].cardName,callback:function(e){t.multipleSelection[0].cardName=e},expression:"multipleSelection[0].cardName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格次数:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.multipleSelection[0].cardCount,callback:function(e){t.multipleSelection[0].cardCount=e},expression:"multipleSelection[0].cardCount"}},[a("template",{slot:"append"},[t._v("次")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"成本单价:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:t.multipleSelection[0].cardBalance,callback:function(e){t.multipleSelection[0].cardBalance=e},expression:"multipleSelection[0].cardBalance"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"结算价:",prop:"settlementBalance"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.editForm.settlementBalance,callback:function(e){t.editForm.settlementBalance=e},expression:"editForm.settlementBalance"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"总库存量:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:""},model:{value:t.cardData.cardAmount,callback:function(e){t.cardData.cardAmount=e},expression:"cardData.cardAmount"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"可售库存:",prop:"addCount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"可负"},model:{value:t.editForm.addCount,callback:function(e){t.editForm.addCount=t._n(e)},expression:"editForm.addCount"}},[a("template",{slot:"prepend"},[t._v(t._s(t.editForm.cardAmount)+"+")]),t._v(" "),a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"库存阈值:",prop:"thresholdAmount"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.editForm.thresholdAmount,callback:function(e){t.editForm.thresholdAmount=t._n(e)},expression:"editForm.thresholdAmount"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"日售限额:",prop:"saleLimitDay"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.editForm.saleLimitDay,callback:function(e){t.editForm.saleLimitDay=t._n(e)},expression:"editForm.saleLimitDay"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:t.editForm.status,callback:function(e){t.editForm.status=e},expression:"editForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.resetForm("editForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitEditForm("editForm")}}},[t._v("确 定")])],1)],1)],1)},i=[],l={render:r,staticRenderFns:i};e.a=l},yBci:function(t,e,a){"use strict";function r(t){var e=t.params;return a.i(d.a)({url:"/distributor/queryDistributorList",method:"post",data:e})}function i(t){var e=t.params;return a.i(d.a)({url:"/distributor/add",method:"post",data:e})}function l(t){var e=t.params;return a.i(d.a)({url:"/distributor/modify",method:"post",data:e})}function o(t){var e=t.params;return a.i(d.a)({url:"/distributor/queryAllDistributors",method:"post",data:e})}function n(t){var e=t.params;return a.i(d.a)({url:"/distributor/setAppSecret",method:"post",data:e})}e.a=r,e.b=i,e.c=l,e.e=o,e.d=n;var d=a("Vo7i")}});
//# sourceMappingURL=1.7189d0cd4b9ef11998ce.js.map